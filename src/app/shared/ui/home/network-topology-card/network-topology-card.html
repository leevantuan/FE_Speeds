<div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
  <div class="px-4 py-3 border-b border-slate-200">
    <div class="font-semibold text-slate-800">Network Topology</div>
  </div>

  <div class="p-4 md:p-6">
    <div class="bg-slate-50 rounded-xl p-4 md:p-6 overflow-hidden">
      <!--
        Mobile: stack
        Tablet (sm/md): 3 cột (CLIENT - ASSETPOINT - SERVER), Segment xuống dưới dạng legend
        Desktop (lg+): 5 cột (Node - Segment - Node - Segment - Node)
      -->
      <div
        class="grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-[minmax(0,1fr)_140px_minmax(0,1fr)_140px_minmax(0,1fr)] gap-4 items-start lg:items-center"
      >
        <!-- CLIENT -->
        <div class="text-center min-w-0">
          <div class="inline-flex px-3 py-1 rounded-md bg-blue-600 text-white text-xs font-bold">
            CLIENT
          </div>

          <div class="mt-3 flex justify-center">
            <img
              [ngSrc]="icons.client"
              width="96"
              height="96"
              class="w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24"
              alt="Client"
            />
          </div>

          <!-- bỏ min-w để không tràn, thêm max-w để đẹp -->
          <div
            class="mt-3 mx-auto w-full max-w-[240px] rounded-lg bg-white border border-slate-200 px-3 py-2 text-sm text-slate-700 break-words"
          >
            RSSI:
            <span class="font-semibold text-emerald-600">{{ topology.client.rssiDbm }} dBm</span>
            <br />
            SNR: <span class="font-semibold">{{ topology.client.snrDb }} dB</span>
          </div>
        </div>

        <!-- Segment A (chỉ hiện desktop lg+) -->
        <div class="hidden lg:flex flex-col items-center justify-center min-w-0">
          <div class="h-2 w-full max-w-[220px] bg-emerald-500 rounded-full"></div>
          <div class="mt-2 text-sm font-semibold text-slate-700">Segment A</div>
        </div>

        <!-- ASSETPOINT -->
        <div class="text-center min-w-0">
          <div class="inline-flex px-3 py-1 rounded-md bg-emerald-600 text-white text-xs font-bold">
            ASSETPOINT
          </div>

          <div class="mt-3 flex justify-center">
            <img
              [ngSrc]="icons.assetpoint"
              width="96"
              height="96"
              class="w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24"
              alt="Assetpoint"
            />
          </div>

          <div
            class="mt-3 mx-auto w-full max-w-[240px] rounded-lg bg-white border border-slate-200 px-3 py-2 text-sm text-slate-700 break-words"
          >
            Speed:
            <span class="font-semibold text-emerald-600"
              >{{ topology.assetPoint.speedMbps }} Mbps</span
            >
          </div>
        </div>

        <!-- Segment B (chỉ hiện desktop lg+) -->
        <div class="hidden lg:flex flex-col items-center justify-center min-w-0">
          <div class="h-2 w-full max-w-[220px] bg-emerald-500 rounded-full"></div>
          <div class="mt-2 text-sm font-semibold text-slate-700">Segment B</div>
        </div>

        <!-- SERVER -->
        <div class="text-center min-w-0">
          <div class="inline-flex px-3 py-1 rounded-md bg-blue-600 text-white text-xs font-bold">
            SERVER
          </div>

          <div class="mt-3 flex justify-center">
            <img
              [ngSrc]="icons.server"
              width="96"
              height="96"
              class="w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24"
              alt="Server"
            />
          </div>

          <div
            class="mt-3 mx-auto w-full max-w-[240px] rounded-lg bg-white border border-slate-200 px-3 py-2 text-sm text-slate-700 break-words"
          >
            RTT: <span class="font-semibold">{{ topology.server.rttMs ?? '—' }} ms</span>
          </div>
        </div>
      </div>

      <!-- Mobile/Tablet: Segment A/B xuống dưới dạng legend -->
      <div class="mt-4 grid grid-cols-1 gap-3 text-center lg:hidden">
        <div class="flex items-center justify-center gap-2">
          <div class="h-2 w-24 bg-emerald-500 rounded-full"></div>
          <div class="text-sm font-semibold text-slate-700">Segment A</div>
        </div>
        <div class="flex items-center justify-center gap-2">
          <div class="h-2 w-24 bg-emerald-500 rounded-full"></div>
          <div class="text-sm font-semibold text-slate-700">Segment B</div>
        </div>
      </div>
    </div>
  </div>
</div>
